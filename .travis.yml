language: cpp

jobs:
  include:
    - os: linux
      compiler: clang
      addons:
        apt:
          packages: ["llvm"]
      before_install:
        - export LLVM_DIR="/usr/lib/llvm-6/cmake"
    - os: osx
      compiler: clang
      addons:
        homebrew:
          packages: ["llvm"]
      before_install:
        - brew install llvm
        - find /usr/local -name LLVMConfig.cmake
        - export LLVM_DIR="/usr/local/opt/llvm/lib/cmake/llvm"


script:
  - mkdir build && cd build
  - cmake .. -DCMAKE_CXX_COMPILER="`which clang`"
  - cmake --build . --config release

env:
  global:
    - GH_REF: github.com/yangzh1998/purpo.git
    - P_BRANCH: main
    - U_NAME: yangzh1998
    - U_EMAIL: yangzh1998@hotmail.com